@inject AuthService AuthService
@inject NavigationManager Navigation

@if (AuthService.IsAuthenticated)
{
    @ChildContent
}
else
{
    @if (RedirectToLogin)
    {
<text>Redirecting to login...</text>
@code {
    protected override void OnInitialized()
    {
        Navigation.NavigateTo("/login", true);
    }
}
    }
    else
{
    <div class="unauthorized-message">
        <i class="bi bi-lock" style="font-size: 48px; color: #dc2626;"></i>
        <h3>Access Denied</h3>
        <p>You must be logged in to view this page.</p>
        <a href="/login" class="btn btn-primary">Go to Login</a>
    </div>
}
}

@code {
    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    [Parameter]
    public bool RedirectToLogin { get; set; } = true;
}