@page "/customer-details/{CustomerId:int}"
@inject NavigationManager Navigation

<div class="customers-container">
    @* <div class="customers-header">
        
    </div> *@
    <div class="details-page">
        <div class="details-header">
            <div class="d-flex justify-content-between align-items-center">
                <h1>@customerDetails.Name</h1>
                <button class="btn-back" @onclick="NavigateBack">
                    <i class="bi bi-arrow-left"></i> Back
                </button>
            </div>

            <div class="header-tabs">
                <button class="tab-btn active">Overview</button>
                <button class="tab-btn">Invoice</button>
            </div>
        </div>


        <div class="details-grid">
            <!-- Left Panel - Customer Information -->
            <div class="details-card">
                <div class="form-group">
                    <label>Name</label>
                    <input type="text" class="form-control" @bind="customerDetails.Name" />
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" class="form-control" @bind="customerDetails.Email" />
                </div>
                <div class="form-group">
                    <label>Company Name</label>
                    <input type="text" class="form-control" @bind="customerDetails.CompanyName" />
                </div>
                <div class="form-group">
                    <label>Phone</label>
                    <input type="text" class="form-control" @bind="customerDetails.Phone" />
                </div>
                <div class="form-group">
                    <label>Status</label>
                    <select class="form-control" @bind="customerDetails.Status">
                        <option value="Active">Active</option>
                        <option value="Inactive">Inactive</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Created at</label>
                    <input type="text" class="form-control" value="@customerDetails.CreatedAt" readonly />
                </div>
            </div>

            <!-- Center Panel - Activity Tabs -->
            <div class="details-card">
                <div class="activity-tabs">
                    <button class="activity-tab active">Overview</button>
                    <button class="activity-tab">Transactions</button>
                    <button class="activity-tab">Interactions</button>
                    <button class="activity-tab">Docs</button>
                    <i class="bi bi-three-dots-vertical"></i>
                </div>
                <div class="activity-content">
                    <div class="activity-item">
                        <span class="activity-label">Recent Activity</span>
                        <button class="btn-view">View</button>
                    </div>
                    <div class="activity-item">
                        <span class="activity-label">Documents</span>
                        <button class="btn-view">View</button>
                    </div>
                </div>
            </div>

            <!-- Right Panel - Revenue & Actions -->
            <div class="details-card">
                <div class="revenue-section">
                    <div class="revenue-icon">
                        <i class="bi bi-receipt"></i>
                    </div>
                    <div class="revenue-info">
                        <div class="revenue-amount">Php 190,000.00</div>
                        <div class="revenue-label">Total Revenue</div>
                    </div>
                </div>
                <div class="action-buttons">
                    <button class="btn-action">
                        <i class="bi bi-pencil"></i> Edit Customer
                    </button>
                    <button class="btn-action">
                        <i class="bi bi-plus-lg"></i> Log Interaction
                    </button>
                    <button class="btn-action">
                        <i class="bi bi-envelope"></i> Send Email
                    </button>
                    <button class="btn-action">
                        <i class="bi bi-calendar"></i> Schedule Meeting
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

@code {
    [Parameter]
    public int CustomerId { get; set; }

    private class CustomerDetail
    {
        public int Id { get; set; }
        public string Name { get; set; } = "";
        public string Email { get; set; } = "";
        public string CompanyName { get; set; } = "";
        public string Phone { get; set; } = "";
        public string Status { get; set; } = "";
        public string CreatedAt { get; set; } = "";
    }

    private CustomerDetail customerDetails = new();

    protected override void OnInitialized()
    {
        // Load customer details based on CustomerId
        customerDetails = GetCustomerDetails(CustomerId);
    }

    private CustomerDetail GetCustomerDetails(int id)
    {
        // Sample data - replace with actual data service
        return new CustomerDetail
        {
            Id = id,
            Name = "Miles Morales",
            Email = "miles.morales@example.com",
            CompanyName = id <= 3 ? "XYZ Company" : "ABC Corporation",
            Phone = "+1 (555) 123-4567",
            Status = "Active",
            CreatedAt = "2024-01-15"
        };
    }

    private void NavigateBack()
    {
        Navigation.NavigateTo("/customers");
    }
}